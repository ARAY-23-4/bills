<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FinancePro | HTML Edition</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        body { 
            font-family: 'Plus Jakarta Sans', sans-serif;
            background-color: #ffffff;
            color: #000000;
        }
        .soft-card {
            background: #ffffff;
            border: 1px solid #000000;
        }
        .custom-scrollbar::-webkit-scrollbar { width: 4px; }
        .custom-scrollbar::-webkit-scrollbar-track { background: #f1f5f9; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: #000000; border-radius: 10px; }

        @media print {
            nav, .no-print, footer, .management-controls, .metrics-dashboard { display: none !important; }
            body { background-color: white !important; padding: 0; margin: 0; }
            .printable-ledger { border: none !important; width: 100% !important; position: absolute; top: 0; left: 0; }
            .ledger-header { background-color: #f4f4f5 !important; -webkit-print-color-adjust: exact; }
        }
    </style>
</head>
<body class="min-h-screen selection:bg-black selection:text-white">

    <nav class="bg-white sticky top-0 z-50 border-b border-black no-print">
        <div class="max-w-6xl mx-auto px-4 h-14 flex justify-between items-center">
            <div class="flex items-center gap-2">
                <div class="w-8 h-8 bg-black rounded flex items-center justify-center text-white">
                    <i data-lucide="layers" class="w-5 h-5"></i>
                </div>
                <h1 class="text-lg font-extrabold tracking-tight text-black uppercase">FinancePro</h1>
            </div>
            <button onclick="resetData()" class="p-2 hover:bg-black hover:text-white rounded transition-all" title="Reset Data">
                <i data-lucide="refresh-cw" class="w-4 h-4"></i>
            </button>
        </div>
    </nav>

    <main class="max-w-6xl mx-auto px-4 py-4 sm:py-8">
        
        <div class="metrics-dashboard grid grid-cols-1 md:grid-cols-3 gap-3 sm:gap-6 mb-6 sm:mb-12">
            <div class="soft-card p-4 sm:p-6 rounded-2xl">
                <p class="text-[10px] font-bold text-black uppercase tracking-widest mb-2">Revenue</p>
                <h2 id="display-revenue" class="text-2xl sm:text-3xl font-extrabold text-black">₹0.00</h2>
            </div>

            <div class="soft-card p-4 sm:p-6 rounded-2xl border-l-4 border-l-red-500">
                <p class="text-[10px] font-bold text-black uppercase tracking-widest mb-2">Expenses</p>
                <h2 id="display-expenses" class="text-2xl sm:text-3xl font-extrabold text-black">₹0.00</h2>
            </div>

            <div id="balance-card" class="soft-card p-4 sm:p-6 rounded-2xl border-l-4 border-l-green-500">
                <div class="flex justify-between items-center mb-2">
                    <p class="text-[10px] font-bold text-black uppercase tracking-widest">Net Balance</p>
                    <span id="display-margin" class="text-[10px] font-black border border-black px-2 py-0.5 rounded">0% Margin</span>
                </div>
                <h2 id="display-net" class="text-2xl sm:text-3xl font-extrabold text-black">₹0.00</h2>
            </div>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-12 gap-4 lg:gap-8 items-start">
            
            <div class="management-controls lg:col-span-4 space-y-4 no-print">
                <div class="soft-card p-5 sm:p-8 rounded-2xl">
                    <h3 class="font-bold text-sm uppercase mb-4">Update Sales</h3>
                    <div class="space-y-3">
                        <div class="relative">
                            <span class="absolute left-4 top-1/2 -translate-y-1/2 text-black font-bold">₹</span>
                            <input type="number" id="input-revenue" class="w-full bg-white border border-black rounded-lg pl-8 pr-4 py-3 font-bold text-lg focus:outline-none">
                        </div>
                        <button onclick="setRevenue()" class="w-full bg-black text-white font-bold py-3 rounded-lg hover:bg-zinc-800 transition-all uppercase text-sm">Set Revenue</button>
                    </div>
                </div>

                <div class="soft-card p-5 sm:p-8 rounded-2xl">
                    <h3 class="font-bold text-sm uppercase mb-4">New Entry</h3>
                    <div class="space-y-3">
                        <input type="text" id="exp-title" placeholder="Description" class="w-full border border-black rounded-lg px-4 py-2 text-sm focus:outline-none">
                        <div class="relative">
                            <span class="absolute left-4 top-1/2 -translate-y-1/2 text-black font-bold">₹</span>
                            <input type="number" id="exp-amount" placeholder="0.00" class="w-full border border-black rounded-lg pl-8 pr-4 py-2 text-sm font-bold focus:outline-none">
                        </div>
                        <button onclick="addExpense()" class="w-full bg-black text-white font-bold py-3 rounded-lg hover:bg-zinc-800 transition-all uppercase text-sm">Add Transaction</button>
                    </div>
                </div>
            </div>

            <div class="lg:col-span-8 printable-ledger">
                <div class="soft-card rounded-2xl overflow-hidden flex flex-col h-full min-h-[400px]">
                    <div class="ledger-header p-4 border-b border-black flex justify-between items-center bg-zinc-50">
                        <h3 class="text-sm font-black uppercase">Ledger History</h3>
                        <div class="flex items-center gap-2">
                            <button onclick="window.print()" class="no-print p-2 border border-black rounded hover:bg-black hover:text-white transition-all">
                                <i data-lucide="printer" class="w-4 h-4"></i>
                            </button>
                            <span id="item-count" class="px-2 py-0.5 border border-black rounded text-[10px] font-bold">0 Items</span>
                        </div>
                    </div>

                    <div id="ledger-list" class="flex-1 overflow-y-auto custom-scrollbar divide-y divide-black/10">
                        </div>

                    <div class="p-4 bg-zinc-100 border-t border-black grid grid-cols-3 gap-2 text-center">
                        <div>
                            <p class="text-[9px] font-black uppercase opacity-60">Outflow</p>
                            <p id="footer-expenses" class="text-lg font-black">₹0.00</p>
                        </div>
                        <div>
                            <p class="text-[9px] font-black uppercase opacity-60">Net</p>
                            <p id="footer-net" class="text-lg font-black">₹0.00</p>
                        </div>
                        <div>
                            <p class="text-[9px] font-black uppercase opacity-60">Margin</p>
                            <p id="footer-margin" class="text-lg font-black">0%</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script>
        // State Management
        let data = {
            income: parseFloat(localStorage.getItem('income')) || 0,
            expenses: JSON.parse(localStorage.getItem('expenses')) || []
        };

        function updateUI() {
            const totalExpenses = data.expenses.reduce((sum, item) => sum + item.amount, 0);
            const netProfit = data.income - totalExpenses;
            const margin = data.income > 0 ? ((netProfit / data.income) * 100).toFixed(1) : 0;

            // Update Metrics
            document.getElementById('display-revenue').innerText = `₹${data.income.toLocaleString()}`;
            document.getElementById('display-expenses').innerText = `₹${totalExpenses.toLocaleString()}`;
            document.getElementById('display-net').innerText = `₹${netProfit.toLocaleString()}`;
            document.getElementById('display-margin').innerText = `${margin}% Margin`;
            
            // Footer stats
            document.getElementById('footer-expenses').innerText = `₹${totalExpenses.toLocaleString()}`;
            document.getElementById('footer-net').innerText = `₹${netProfit.toLocaleString()}`;
            document.getElementById('footer-margin').innerText = `${margin}%`;
            document.getElementById('item-count').innerText = `${data.expenses.length} Items`;

            // Balance Color
            const balanceCard = document.getElementById('balance-card');
            balanceCard.className = `soft-card p-4 sm:p-6 rounded-2xl border-l-4 ${netProfit >= 0 ? 'border-l-green-500' : 'border-l-red-500'}`;

            // Render Ledger
            const list = document.getElementById('ledger-list');
            if (data.expenses.length === 0) {
                list.innerHTML = `<div class="py-20 text-center opacity-30 text-xs font-bold uppercase tracking-widest">No Transactions Logged</div>`;
            } else {
                list.innerHTML = data.expenses.map((item, index) => `
                    <div class="flex items-center justify-between p-4 hover:bg-zinc-50 group">
                        <div class="flex items-center gap-3">
                            <div class="w-8 h-8 rounded border border-black flex items-center justify-center"><i data-lucide="tag" class="w-4 h-4"></i></div>
                            <div>
                                <p class="font-bold text-sm">${item.title}</p>
                                <p class="text-[9px] font-bold opacity-60 uppercase">${item.date}</p>
                            </div>
                        </div>
                        <div class="flex items-center gap-4">
                            <span class="font-extrabold">-₹${item.amount.toLocaleString()}</span>
                            <button onclick="deleteExpense(${index})" class="no-print text-zinc-400 hover:text-red-500"><i data-lucide="x" class="w-4 h-4"></i></button>
                        </div>
                    </div>
                `).reverse().join('');
            }
            lucide.createIcons();
            localStorage.setItem('income', data.income);
            localStorage.setItem('expenses', JSON.stringify(data.expenses));
        }

        function setRevenue() {
            const val = document.getElementById('input-revenue').value;
            if (val) {
                data.income = parseFloat(val);
                updateUI();
            }
        }

        function addExpense() {
            const title = document.getElementById('exp-title').value;
            const amount = parseFloat(document.getElementById('exp-amount').value);
            
            if (title && amount > 0) {
                data.expenses.push({
                    title,
                    amount,
                    date: new Date().toLocaleDateString('en-IN', { day: '2-digit', month: 'short', year: 'numeric' })
                });
                document.getElementById('exp-title').value = '';
                document.getElementById('exp-amount').value = '';
                updateUI();
            }
        }

        function deleteExpense(index) {
            data.expenses.splice(index, 1);
            updateUI();
        }

        function resetData() {
            if(confirm("Kya aap saara data delete karna chahte hain?")) {
                data = { income: 0, expenses: [] };
                localStorage.clear();
                updateUI();
            }
        }

        // Initial Load
        document.getElementById('input-revenue').value = data.income;
        updateUI();
    </script>
</body>
</html>